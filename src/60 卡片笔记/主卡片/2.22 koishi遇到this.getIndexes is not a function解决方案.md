---
category:
- 卡片/普通
date: 2025-10-27
isOriginal: true
tags: []
title: 2.22 koishi遇到this.getIndexes is not a function解决方案
---
## 背景
刚刚通过docker完成koishi的安装后，一接受消息就会报错
而且，在沙盒里面还会有无法调整用户权限等级的问题

```
TypeError: this.getIndexes is not a function  
at SQLiteDriver.prepareIndexes (/koishi/node_modules/minato/lib/index.cjs:1928:35)  
at Proxy.prepare (/koishi/node_modules/minato/lib/index.cjs:973:18)  
at async Proxy.prepare (/koishi/node_modules/minato/lib/index.cjs:965:5)
```

![IMG-2.22 koishi遇到this.getIndexes is not a function解决方案-5B5199214C0EA61BF9287034967C4ECE.png](/image/IMG-2.22 koishi遇到this.getIndexes is not a function解决方案-5B5199214C0EA61BF9287034967C4ECE.png)

## 问题分析
SQLiteDriver过期，`database-sqlite`版本过老了
## 解决方案
更新 `database-sqlite` 插件

> [!note] 建议
> 在安装完成koishi后就[更新koishi所有依赖](./2.22a 更新koishi所有依赖.md)

## 参考
- [https://github.com/koishijs/koishi/issues/1455](https://github.com/koishijs/koishi/issues/1455)